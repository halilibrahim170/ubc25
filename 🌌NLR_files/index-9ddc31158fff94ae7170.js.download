(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2123:function(e,t,r){"use strict";r.d(t,{s:function(){return u}});var n=r(5893),a=r(6156),s=r(7294),i=r(8775),c=r(4180);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,a.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=function(e){var t=e.data,r=e.repoName,a=e.filesChanged,o=e.maxDepth,u=(0,s.useState)(""),d=u[0],p=u[1],m=(0,s.useState)(""),f=m[0],h=m[1],x=(0,c.Nr)((null===f||void 0===f?void 0:f.split(",").map((function(e){return e.trim()})))||[],500),g=function e(t){var r;return l(l({},t),{},{children:null===(r=t.children)||void 0===r?void 0:r.filter((function(e){return!x.find((function(t){var r;return null===(r=e.path)||void 0===r?void 0:r.startsWith(t)}))})).map(e)})},b=(0,s.useMemo)((function(){return g(t)}),[t,x.join(",")]);return(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:"absolute top-2 right-2 space-y-4 w-[15.5em]",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"uppercase text-xs tracking-widest text-gray-600",children:"Search for a file"}),(0,n.jsx)("input",{type:"text",className:"w-full mt-1 p-2 px-3 border border-gray-200 rounded z-30",placeholder:"example.js",onChange:function(e){return p(e.target.value)},value:d})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"uppercase text-xs tracking-widest text-gray-600",children:"Excluded paths, separated by ,"}),(0,n.jsx)("input",{type:"text",className:"w-full mt-1 p-2 px-3 border border-gray-200 rounded z-30",placeholder:"gulp/",onChange:function(e){return h(e.target.value)},value:f})]})]}),(0,n.jsx)(i.m,{data:b,repoName:r,filesChanged:a,maxDepth:o,searchTerm:d.toLowerCase()})]})}},6124:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(6156),a=r(7329),s=r(7757),i=r.n(s),c=r(5893),o=r(2137),l=r(4699),u=r(7294),d=r(9008),p=r(1163),m=r(5217),f=r(969),h=r(5397),x=r(2123),g=r(4180);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=["node_modules","bower_components","dist","out","build","eject",".next",".netlify",".yarn",".git",".vscode","package-lock.json","yarn.lock",".yarn",".gitattributes"];function y(){var e=(0,p.useRouter)(),t=u.useState(""),r=(0,l.Z)(t,2),n=r[0],s=r[1],b=u.useState(n),y=(0,l.Z)(b,2),N=y[0],k=y[1],O=u.useState(n),P=(0,l.Z)(O,2),S=P[0],_=P[1],z=u.useState(null),C=(0,l.Z)(z,2),E=C[0],D=C[1],Z=u.useState(null),H=(0,l.Z)(Z,2),F=H[0],A=H[1],G=u.useState(!0),T=(0,l.Z)(G,2),W=T[0],I=T[1],L=u.useState("master"),R=(0,l.Z)(L,2),q=(R[0],R[1],(0,g._)("token")),J=(0,l.Z)(q,2),M=J[0],V=J[1],X=(0,m.Z)();M&&(X=X.auth("token ".concat(M))),(0,u.useEffect)((function(){var t,r,n;if(e.isReady){var a=(null===(t=e.query)||void 0===t||null===(r=t.repo)||void 0===r||null===(n=r.trim)||void 0===n?void 0:n.call(r))||"paperjs/paper.js";s(a),k(a)}}),[e.isReady]),(0,u.useEffect)((function(){e.push({query:{repo:S}},void 0,{shallow:!0})}),[S]);var B=function(){var e=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(null),D(null),N){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,X.url("https://api.github.com/repos/".concat(N)).get().json().catch((function(e){console.log("err",e),D((0,c.jsxs)(c.Fragment,{children:["Hmm, we couldn't find ",(0,c.jsx)("a",{className:"underline",href:"http://github.com/".concat(N),target:"_blank",rel:"noopener",children:N}),". Check the name and try again."]})),A(null),_(null)}));case 7:if(e.sent){e.next=10;break}return e.abrupt("return");case 10:_(N),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),D((0,c.jsxs)(c.Fragment,{children:["Hmm, we couldn't find ",(0,c.jsx)("a",{className:"underline",href:"http://github.com/".concat(N),target:"_blank",rel:"noopener",children:N}),". Check the name and try again."]}));case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}();u.useEffect(B,[N]);var Q=function(){var e=(0,o.Z)(i().mark((function e(){var t,r,n,s,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N){e.next=2;break}return e.abrupt("return");case 2:return I(!0),e.next=5,X.url("https://api.github.com/repos/".concat(N,"/git/trees/HEAD?per_page=100&recursive=1")).get().json().catch((function(e){I(!1),JSON.parse(e.message).message.startsWith("API rate limit exceeded")?D((0,c.jsxs)(c.Fragment,{children:["We ran out of GitHub API calls. Please try again in a few minutes or add a ",(0,c.jsx)("a",{href:"https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token",target:"_blank",rel:"noopener",children:"GitHub Personal Access Token"})," here (we'll store it in your local storage):",(0,c.jsxs)("form",{className:"flex flex-col items-center",onSubmit:function(e){e.preventDefault(),B()},children:[(0,c.jsx)("input",{className:"w-80 p-2 px-3 border border-gray-200 mt-2",value:M,onChange:function(e){return V(e.target.value)},type:"password"}),!!M&&(0,c.jsx)("button",{type:"submit",className:"block w-auto mt-2 p-2 px-4 bg-indigo-600 text-white rounded-xl",children:"Try again"})]})]})):(console.log("err",e),D("Something went wrong, please try again."))}));case 5:if((r=e.sent)&&r.tree){e.next=8;break}return e.abrupt("return");case 8:n=[].concat((0,a.Z)(null===(t=r.tree)||void 0===t?void 0:t.map((function(e){return{name:e.path.split("/").pop(),path:e.path,parent:e.path.split("/").slice(0,-1).join("/")||N,size:e.size}}))),[{name:N,path:N,parent:null,size:0}]).filter((function(e){return!v.find((function(t){return e.path.startsWith(t)}))})),s=(0,h.QP8)().id((function(e){return e.path})).parentId((function(e){return e.parent}))(n),o=function e(t){var r;return j(j({},t.data),{},{children:t.depth<6?null===(r=t.children)||void 0===r?void 0:r.map(e):void 0})}(s),A(o),I(!1),console.log("data",o);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.useEffect(Q,[S]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(d.default,{children:[(0,c.jsx)("title",{children:"Visualizing Codebases"}),(0,c.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,c.jsxs)("div",{className:"p-10 pb-6 px-12",children:[(0,c.jsxs)("div",{className:"uppercase tracking-wide ml-4 mb-1 font-medium text-xs text-gray-500",children:["Search for a GitHub repo ",(0,c.jsx)("span",{className:"opacity-70",children:"(org/repo)"})]}),(0,c.jsxs)("form",{className:"md:flex items-stretch mb-3 z-10",onSubmit:function(e){e.preventDefault()},children:[(0,c.jsx)("input",{className:"bg-white font-medium text-gray-900 border border-gray border-gray-light focus:outline-none focus:border-indigo-500 p-2 px-4 w-full md:w-96 rounded-t-xl md:rounded-l-xl md:rounded-tr-none text-lg",value:n,onChange:function(e){return s(e.target.value)}}),(0,c.jsx)("div",{className:"ml-[-1px] z-10",children:N===n?(0,c.jsx)("button",{className:"w-full md:w-auto h-full flex items-center px-5 pr-6 py-2 rounded-b-xl md:rounded-r-xl md:rounded-bl-none bg-gray-200 text-gray-600 cursor-default",disabled:!0,children:N===n?"Got the data!":"Fetching repo..."}):(0,c.jsxs)("button",{className:"w-full md:w-auto h-full flex items-center px-5 py-2 rounded-b-xl md:rounded-r-xl md:rounded-bl-none bg-indigo-600 text-white",type:"submit",onClick:function(){return k(null===n||void 0===n?void 0:n.trim())},children:["Fetch repo",(0,c.jsx)("div",{className:"ml-2 -mb-[1px] text-xl opacity-50",children:(0,c.jsx)(f.LbG,{})})]})})]}),(0,c.jsxs)("p",{className:"italic text-gray-600 font-light text-sm",children:["Not sure where to look first? Here are some interesting repositories:",(0,c.jsx)("br",{}),w.map((function(e,t){return(0,c.jsxs)("span",{className:"mr-1",children:[(0,c.jsx)("button",{className:"underline text-sm",onClick:function(){k(e)},children:e}),t!=w.length-1&&(0,c.jsx)("span",{children:", "})]},e)}))]}),(0,c.jsxs)("div",{className:"relative flex items-center justify-center min-h-[1000px] w-[1000px]",children:[W&&(0,c.jsxs)("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex flex-col items-center justify-center text-center z-50",children:[(0,c.jsxs)("svg",{className:"animate-spin mb-2 h-6 w-6 text-indigo-300",fill:"none",viewBox:"0 0 24 24",children:[(0,c.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,c.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,c.jsx)("div",{className:"text-center italic text-lg text-gray-600",children:"Loading..."})]}),!!E&&(0,c.jsxs)("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex flex-col items-center justify-center text-center",children:[(0,c.jsx)("div",{className:"animate-pulse text-indigo-300 text-3xl mb-2",children:(0,c.jsx)(f.HJx,{})}),(0,c.jsx)("div",{className:"text-center italic text-lg text-gray-600 max-w-[25em]",children:E})]}),!!F&&(0,c.jsxs)("div",{className:"py-10 mr-auto",children:[(0,c.jsx)("div",{className:"mb-8 text-5xl",children:(0,c.jsx)("span",{className:"font-bold",children:F.name})}),(0,c.jsx)(x.s,{data:F,maxDepth:5,repoName:N})]})]})]})]})}var w=["metafizzy/zdog","facebook/create-react-app","reactjs/redux","mzabriskie/react-draggable","deepmind/alphafold","pmndrs/react-spring","the-pudding/data","animate-css/animate.css","joshwcomeau/react-flip-move","d3/d3-geo","paperjs/paper.js","popperjs/popper-core","marmelab/react-admin","vuejs/vue","gcanti/fp-ts","ant-design/ant-design","jaredpalmer/razzle"]},8581:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(6124)}])},1163:function(e,t,r){e.exports=r(4651)}},function(e){e.O(0,[884,252,969,775,180,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);